@model ATM.Models.Transaction

@{
    ViewBag.Title = "Withdrawal";
}

<h2>Withdrawal</h2>


@using (Html.BeginForm()) 
{
    @Html.AntiForgeryToken()
    
    <div class="form-horizontal" id="formSection">
        <form method="post" id="withdrawalForm">
            <h4>Transaction</h4>
            <hr />
            @Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(model => model.Amount, htmlAttributes: new { @class = "control-label col-md-2" })
                <div class="col-md-10">
                    @Html.EditorFor(model => model.Amount, new { htmlAttributes = new { @class = "form-control" } })
                    @Html.ValidationMessageFor(model => model.Amount, "", new { @class = "text-danger" })
                </div>
            </div>



            <div class="form-group">
                <div class="col-md-offset-2 col-md-10">
                    
                    <a class="btn btn-success" data-toggle="modal" data-target=".bootstrapmodal"><span class="glyphicon glyphicon-circle-arrow-up "></span> Withdraw Money</a>
                    <h3>@ViewBag.message</h3>
                </div>
            </div>

            <div class="modal fade bootstrapmodal" id="modal" title="Basic Modal Dialog">
                This is a test modal
                <div class="modal-dialog">
                    <div class="modal-content">
                        <div class="modal-header">
                            <button data-dismiss="modal" class="close"><span>&times;</span></button>
                            <div class="modal-title"><h2>Alert!</h2></div>

                        </div>
                        <div class="modal-body">
                            <h4>Bank charges: R10. Are you sure you want to complete this action?</h4>
                        </div>
                        <div class="modal-footer">
                            <input type="submit" value="Yes" class="btn btn-default" />
                            <button class="btn btn-default" data-dismiss="modal">cancel</button>
                        </div>
                    </div>
                </div>
            </div>


        </form>
    </div>
}

<div>
    @Html.ActionLink("Back to List", "Index", "Home")
</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")

<script>
        $('#withdrawalForm').submit(function ()
        {
           // $('#progress').show();

            $.post('', {}).done(function (response)
            {
                setTimeout(function () { $('#formSection').html(response); }, 2000);
            });
            return false;
        });
</script>
}
